***Общая схема работы связки скриптов***

**Со стороны слейва необходимо установить количество аналоговых портов**

**Со стороны мастера:**
Необходимо указать значения:
	MAX_OUT - максимальное значение индекса выхода на мастере
	MAX_OUT_SLAVE - максимальное значение индекса выхода на слейве
	MAX_IN - максимальное значение индекса входа на мастере
	MAX_IN_SLAVE - максимальное значение индекса входа на слейве

- Каждые 100-200 мс на мастере вызывается обработчик RS485

- Скрипт мастера проверяет значения глобальных переменных (флагов - boolean) команд:
	- get_input_status - получить статус порта (закомментиривано - реализован более быстрый способ)
	- get_input - получить значение напряжения на входе
	- get_output_status - получить статус выхода (закомментиривано - реализован более быстрый способ)
	- set_output_on - притянуть выход к земле (закомментиривано - реализован более быстрый способ)
	- set_output_off - убрать подтяжку выхода к земле (закомментиривано - реализован более быстрый способ)

- При значении флага "true" выполняет команду применительно к индексу порта указанному в глобальной переменной port_index

Для выполнения перечисленных команд нужно сперва записывать глобальную переменную port_index и только после этого выставлять флаг нужной команды.

- Читает необходимые состояния (флаги) выходов слейва в глобальной переменной em_Outs_Cmd. Индекс бита соответствует индексу выхода слейва.

- Читает фактические состояния (флаги) выходов слейва в глобальных переменных em_outStat0 - em_outStat3 полученных при предыдущем запуске обработчика RS485.

- При несовпадении состояний отправляет комманду на слейв.

Для управления импульсными реле:
- Читает значение в глобальной переменной out_pulse и delay_pulse. out_pulse по умолчанию == -1. Значение привышающее MAX_OUT принадлежит слейву: ЗНАЧЕНИЕ_ИНДЕКСА_СЛЕЙВА = out_pulse - (MAX_OUT + 1)
- При валидном значении согласно out_pulse выполняет импульс на мастере либо отправляет команду на слейв.
